{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["'use strict';\n\n//PASOS\n//hacer el HTML básico (crear una tarjeta de ejemplo, estilo)\n//pintar una tarjeta (fetch, crear la función que renderiza la tarjeta)\n//pintar la lista completa de todas las tarjetas(cambiar la url API y hacer un bucle para recorrer el array que nos da el servidor)\n//añadir a mis paletas favoritas (identificar )\n\n\n//VARIABLES\n//Comenzaremos copiandonos los datos del API (el array de objetos) a una variable de nuestro código JavaScript y generando el HTML para un único personaje.\n\nconst ulElement = document.querySelector('.js_card_list');\nconst ulFavorites = document.querySelector('.js_fav_list');\nconst url = `https://api.disneyapi.dev/character?pageSize=50`;\nconst inputSearch = document.querySelector('.js_inputSearch');\nconst btnSearch = document.querySelector('.js_btnSearch');\n//const clearX = document.querySelectorAll('.js_x');\n\nlet listCharactersApi = []; //la relleno cuando me lleguen los datos del servidor\nlet listCharactersFav = [];//crear el array de favoritos, aquí debo guardar el elmento clicado\n\nconst charactersLS = JSON.parse(localStorage.getItem('favCharacters'));\n\ninit();\nfunction init (){\n    if(charactersLS) { //si charactersLS es verdadero entonces lo que hay dentro lo guardará en listCharactersFav\n       listCharactersFav = charactersLS; // una vez que ya tengo lo q hay en LS llamo a renderFavList()\n       renderFavList();//ahora muestro lo que hay. \n    }\n\n//fetch peticion al servidor\nfetch(url)\n    .then((response) => response.json())\n    .then((listData) => {\n        listCharactersApi = listData.data //elijo la propiedad del array que necesito y lo guardo en array personal\n        renderAllCharacters(listCharactersApi);  //una vez tengo los datos los renderizo(hago q se vean)\n    //local storage dentro del then\n        \n    });\n}\n//FUNCIONES\n//creo una función para renderizar los datos que tengo guardados en mi array. esta función recorre el array y por cada elemento del array guarda en el HTML lo q nos retorna la funcion renderOneCharacter (creada previamente, que es solo una tarjeta personaje)\nfunction renderAllCharacters(listData) {\n    ulElement.innerHTML = \"\"; //vacío la lista oara que al llamar a renderAllCharacters en el buscador no me añada y solo me muestre el que busco\n    for (const character of listData) {\n        ulElement.innerHTML += renderOneCharacter(character);\n    }\n    addEventCharacter();\n}\n\nfunction addEventCharacter(){\nconst liElementList = document.querySelectorAll('.js_list');\n    for (const li of liElementList) {\n        li.addEventListener(\"click\", handelClick);\n    }\n}\n\n//Crear función render, esta función nos retorna un li con todo el HTML correspondiente a un personaje de la lista de la API. Posteriormente le añado un id(atributo gancho) para poder identificar el elemento clicado posteriormente. Añado un condicional para mostrar un placeholder el caso de que la tarjeta proporcionada por la Api no tenga imagen\nfunction renderOneCharacter(character) {\n    let img = character.imageUrl;\n    if (img === undefined || img === \"\") {\n        img = \"https://via.placeholder.com/210x295/ffffff/555555/?text=Disney\";\n    }\n    \n    let html = `\n        <li id=\"${character._id}\" class=\"card js_list\">\n        <article class=\"character__box\">   \n            <img class=\"character__img js_img\"\n            src=\"${img}\"\n            alt=\"Disney Characters:${character.name}\" />\n            <p class=\"character__name js_name\">\"${character.name}\"</p>\n        </article>\n        </li>`;\n           \n    return html;\n}\n\n\nfunction renderOneFav(character) {\n    let img = character.imageUrl;\n    if (img === undefined || img === \"\") {\n        img = \"https://via.placeholder.com/210x295/ffffff/555555/?text=Disney\";\n    }\n    let html = `\n        <li id=\"${character._id}\" class=\"card js_list select\">\n        <article class=\"character__box\">\n            <img class=\"character__img js_img\"\n            src=\"${img}\"\n            alt=\"Disney Characters:${character.name}\" />\n            <i class=\"fa-solid fa-square-xmark js_x\"></i>\n            <p class=\"character__name js_name select\">\"${character.name}\"</p>\n        </article>\n        </li>`;\n           \n    return html;\n}\n\n\n//EVENTOS\n\n//escuchar un evento click sobre cada uno de las tarjetas de personajes para obtener la info del atributo gancho y saber cuál es el elemento clicado. Se lo he puesto al li completo por eso uso currentTarget.\nfunction handelClick (event){\n    const id = parseInt(event.currentTarget.id); //parseInt para convertirlo en número\n//method find - hacer una búsqueda dentro del array de favoritos. \nconst selectedCharacter = listCharactersApi.find((item) => item._id === id);\n//method findIndex devuelve la posición y si no se encuentra devuelve -1\nconst indexCharacter = listCharactersFav.findIndex((item) => item._id === id);\n//hacer un condicional que haga que si la tarjeta de personajes seleccionada como fav no esté en el listCharactersFav haga push y la añada (antes hay que buscar en el array de favoritos)\nif (indexCharacter === -1) {\n    listCharactersFav.push(selectedCharacter);\n    //event.currentTarget.classList.add(\"select\");\n} else {\n    listCharactersFav.splice(indexCharacter, 1);\n    //event.currentTarget.classList.remove(\"select\");\n}\n    localStorage.setItem(\"favCharacters\", JSON.stringify(listCharactersFav)); //Para guardar el local Storage de los favoritos ES AQUÍ \n    renderFavList(listCharactersFav);\n}\n\n//Una vez obtengo el id me interesa guardar todo ese objeto que obtengo de la tarjeta de personajes en un array nuevo. El array de todos mis favoritos. Primero crear el array\n\n\n//crear una función para pintar la lista de favoritos en HTML. Esta función la tengo q llamar dentro de la función handelClick una vez que haya añadido o eliminado del array\nfunction renderFavList(character){\n    ulFavorites.innerHTML = \"\"; //borra lo que ya tiene el array cada vez q se renderiza\n    for (const fav of listCharactersFav){\n        \n        ulFavorites.innerHTML += renderOneFav(fav);//uso la misma render pero le cambio el parámetro\n    }\n    \n}\n\n//crear un evento para el btn de búsqueda que filtre según lo que escribimo en el input\nconst handelSearch = (event) => {\n    event.preventDefault();\n    const inputValue = inputSearch.value;\n    const filterList = listCharactersApi.filter((item) => \n    item.name.toLowerCase().includes(inputValue.toLowerCase())\n    );\n    renderAllCharacters(filterList);\n}\nbtnSearch.addEventListener(\"click\", handelSearch) //escucho el botón al hacer click\n\n\n//crear un evento en la X que al clicar elimine los favoritos de la lista del localStorage\n/*\nfunction addEventClear(){\n    \n    const clearX = document.querySelectorAll('.js_x');\n        for (const elX of clearX) {\n            clearX.addEventListener(\"click\", handelX);//Elemento sobre el que escucho el evento\n        }\n        \n        console.log(clearX);\n    }\n\n//función manejadora del evento de borrar los favoritos\n\nconst handelX = (event) => {\n    event.preventDefault();\n\n    \n    charactersLS = listCharactersFav.splice(indexCharacter, 1);\n    console.log('hecho clic');\n}\n*/\n//clearX.addEventListener(\"click\", handelX)\n"]}